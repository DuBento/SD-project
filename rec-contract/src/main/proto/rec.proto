//
// Protocol buffers definition
//
syntax = "proto3";
package pt.tecnico.rec.grpc;



message RegisterRequest {
  // defined seperatly for future additions
  string id = 1;
}

message RegisterValue {
  oneof value {
    RegisterBalance RegBalance = 2;
    RegisterOnBike RegOnBike = 3;
    RegisterNBikes RegNBikes = 4;
    RegisterNPickUps RegNPickUps = 5;
    RegisterNDeliveries RegNDeliveries = 6;
  }
}

message RegisterBalance {
  int32 balance = 1;
}

message RegisterOnBike {
  bool onBike = 1;
}

message RegisterNBikes {
  int32 nBikes = 1;
}

message RegisterNPickUps {
  int32 nPickUps = 1;
}

message RegisterNDeliveries {
  int32 nDeliveries = 1;
}

message ReadRequest {
  RegisterRequest register = 1;
}

message ReadResponse {
  RegisterValue data = 1;
}

message WriteRequest {
  RegisterRequest register = 1;
  RegisterValue data = 2;
}

message WriteResponse {
}

message PingRequest {
  string input = 1;
}

message PingResponse {
	string output = 1;
}
  
service RecordService {
  rpc read(ReadRequest) returns (ReadResponse);
  rpc write(WriteRequest) returns (WriteResponse);
  rpc ping(PingRequest) returns (PingResponse);
}
